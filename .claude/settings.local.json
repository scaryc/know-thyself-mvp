{
  "permissions": {
    "allow": [
      "Bash(dir:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: Add explicit Slovak language constraints to all agent prompts and debug logging\n\n- Add critical language instruction block to all 3 Slovak agent prompts\n  (cognitiveCoachAgent, core-agent-ami, aarAgent) to enforce Slovak-only responses\n- Add session.language debug logging at critical points:\n  * Cognitive Coach message handler\n  * Begin Scenario transition\n  * Core Agent message handler\n- Fix session check endpoint to return language preference for session resume\n  (index.js:462)\n\nThis addresses Slovak translation issues where agents were mixing Slovak/English\nor defaulting to English during conversations. The explicit instruction ensures\nClaude maintains Slovak throughout all interactions regardless of student input language.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push:*)",
      "Bash(git commit:*)",
      "Bash(findstr:*)",
      "Bash(node:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Implement Strategy B - Structured Memory & Prompt Caching\n\nResolves context overflow issues that caused empty AI responses at ~10 min into scenarios.\n\n**Major Changes:**\n\n1. **Structured Memory System** \\(server/index.js:2378-2464\\)\n   - Store scenario events as structured data instead of full messages\n   - Track: actions, vitals, disclosures, state changes, emotions\n   - Reduces memory from 7,000 to 630 tokens per 10 exchanges\n\n2. **Prompt Caching** \\(server/index.js:2630-2682\\)\n   - Cache static content \\(core prompt, scenario baseline\\)\n   - 90% cost savings on cached content\n   - 10x speed improvement on cache hits\n\n3. **Selective Recall Engine** \\(server/index.js:2470-2543\\)\n   - Intelligently filter memory by relevance\n   - Safety-first: NEVER filter allergies/medications during treatments\n   - 60% token savings at 20 minutes\n\n4. **Time-Based Message Window** \\(server/index.js:2688-2712\\)\n   - 4 exchanges \\(8 messages\\) normally\n   - 5 exchanges \\(10 messages\\) after 10 minutes\n   - Prevents unbounded conversation history growth\n\n5. **Enhanced Compound Action Handling** \\(server/index.js:2718-2833\\)\n   - Detect multi-action messages \\(3+ actions\\)\n   - Dynamic max_tokens \\(2000/3000/4000\\)\n   - Explicit checklists for AI to address all parts\n\n6. **AAR Mode Fixes** \\(App.tsx, ConversationPanel.tsx\\)\n   - Fix timing of AAR introduction message storage\n   - Add comprehensive debugging logs\n   - Clean up sessionStorage after use\n\n**Impact:**\n- âœ… Resolves empty response bug\n- âœ… Enables unlimited scenario length\n- âœ… 90% cost savings on cached content\n- âœ… 35% overall cost reduction\n- âœ… 66% faster average response time\n- âœ… Bounded token growth \\(6,400 at 20 min vs 15,800 before\\)\n\n**Testing:**\n- Token usage remains bounded throughout long scenarios\n- Safety-critical info \\(allergies/meds\\) never filtered\n- Compound actions fully addressed\n- Cache hits achieve 10x speedup\n\nSee docs/Strategy_B_Implementation.md for complete technical details.\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(ls:*)",
      "Bash(git rm:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Replace hard-coded communication tips with adaptive framework\n\nCognitive Coach now analyzes user communication patterns during Phase 2 and delivers personalized guidance in Phase 3. Instead of identical messages for all users, it adapts delivery based on detected sequential thinking, conciseness, thoroughness, and action bundling patterns. Includes full implementation in both English and Slovak prompts.\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git push)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\ndocs: Add comprehensive Cognitive Coach adaptive framework documentation\n\nCreated detailed documentation explaining the why, how, and what of the Cognitive Coach upgrade from Mental Organization Technique to Adaptive Communication Guidance. Includes motivation, implementation details, technical changes, and future considerations.\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(cat:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Implement warm demander approach in Cognitive Coach Agent\n\n- Add systematic response quality checking for all question types\n- Implement 6-path decision tree for handling open vs closed questions\n- Require specificity for vague answers \\(\"check vitals\" â†’ \"which vitals and why?\"\\)\n- Add hypothesis prompting for \"I don 't know\" responses\n- Support pattern recognition questions \\(closed\\) with specific answer matching\n- Update data collection to track warm demander metrics\n- Add support for v2 question pool \\(50 questions: 34 open + 16 closed\\)\n\nChanges apply to both English and Slovak prompts.\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Add Slovak v2 questions and remove old question files\n\n- Add server/data/sk/cognitive_coach_questions_v2_SK.json \\(50 questions: 34 open + 16 closed\\)\n- Remove server/data/en/cognitiveCoachQuestions.json \\(old 20 questions\\)\n- Remove server/data/sk/cognitiveCoachQuestions.json \\(old 20 questions\\)\n- Update Claude Code settings\n\nBoth EN and SK now use v2 question pool with warm demander approach support.\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(grep:*)",
      "Bash(done)",
      "Bash(if [ -f \"c:\\\\Users\\\\peter\\\\know-thyself-mvp\\\\docs\\\\ECG_Implementation_Gap_Analysis.md\" ])",
      "Bash(then echo \"File still exists\")",
      "Bash(else echo \"File successfully deleted\")",
      "Bash(fi)",
      "Bash(ls \"c:\\\\Users\\\\peter\\\\know-thyself-mvp\\\\server\\\\prompts\\\\sk\"\" | grep -i \"core-agent \")"
    ],
    "deny": [],
    "ask": []
  }
}
